<template>
	<div class="top-nav">
		<div class="top-nav-box">
			<div class="side-nav-mobile">
				<i class="pe-7s-keypad"></i>
			</div>
			<div class="logo">
				<img src="/app/images/logo.png">
			</div>
			<div class="quick-link">
				<div class="icon">
					<i class="pe-7s-keypad"></i>
				</div>
				<ul>
					<li><a href=""><i class="pe-7s-link"></i> Add New Product</a></li>
					<li><a href=""><i class="pe-7s-keypad"></i> View Transaction Report</a></li>
					<li><a href=""><i class="pe-7s-note"></i> Add New Category</a></li>
					<li><a href=""><i class="pe-7s-browser"></i> View Visitor Statistic</a></li>
					<li><a href=""><i class="pe-7s-graph1"></i> Add New User</a></li>
				</ul>
			</div>
			<div class="search">
				<i class="pe-7s-search"></i>
				<input type="text" placeholder="Type what you want to search for...">
			</div>
			<div class="messages">
				<div class="icon">
					<i class="pe-7s-chat"></i>
					<div class="count">4</div>
				</div>
				<div class="messages-box">
					<div class="header">Your Latest Messages</div>
					<div class="content">
						<a href="" class="message-list">
							<div class="user-image">
								<img src="/app/images/profile.jpg">
							</div>
							<div class="right-content">
								<div class="name">Muhammad Rizki A</div>
								<div class="text">Lorem Ipsum is simply dummy</div>
							</div>
						</a>
						<a href="" class="message-list">
							<div class="user-image">
								<img src="/app/images/profile.jpg">
							</div>
							<div class="right-content">
								<div class="name">Muhammad Rizki A</div>
								<div class="text">It is a long established</div>
							</div>
						</a>
						<a href="" class="message-list">
							<div class="user-image">
								<img src="/app/images/profile.jpg">
							</div>
							<div class="right-content">
								<div class="name">Muhammad Rizki A</div>
								<div class="text">Many desktop publishing</div>
							</div>
						</a>
						<a href="" class="message-list">
							<div class="user-image">
								<img src="/app/images/profile.jpg">
							</div>
							<div class="right-content">
								<div class="name">Muhammad Rizki A</div>
								<div class="text">Various versions have evolved</div>
							</div>
						</a>
					</div>
					<div class="footer">
						<a href="">See All Messages</a>
					</div>
				</div>
			</div>
			<div class="notification">
				<div class="notification-box">
					<div class="icon">
						<i class="pe-7s-news-paper"></i>
					</div>
					<div class="notification-content">
						<div class="header">
							<div class="title">10 Notification</div>
							<div class="action">Notification Settings</div>
						</div>
						<div class="content">
							<a href="" class="notification-list">
								<div class="name">Transactions Report</div>
								<div class="text">This month transaction report has been generated</div>
								<div class="date">29 January 2018 15:24</div>
							</a>
							<a href="" class="notification-list">
								<div class="name">Transactions Report</div>
								<div class="text">This month transaction report has been generated</div>
								<div class="date">29 January 2018 15:24</div>
							</a>
							<a href="" class="notification-list">
								<div class="name">Transactions Report</div>
								<div class="text">This month transaction report has been generated</div>
								<div class="date">29 January 2018 15:24</div>
							</a>
							<a href="" class="notification-list">
								<div class="name">Transactions Report</div>
								<div class="text">This month transaction report has been generated</div>
								<div class="date">29 January 2018 15:24</div>
							</a>
						</div>
					</div>
				</div>
				<div class="notification-box">
					<div class="icon">
						<i class="pe-7s-drawer"></i>
						<div class="count">2</div>
					</div>
					<div class="notification-content">
						<div class="header">
							<div class="title">2 Notification</div>
							<div class="action">Notification Settings</div>
						</div>
						<div class="content">
							<a href="" class="notification-list">
								<div class="name">Transactions Report</div>
								<div class="text">This month transaction report has been generated</div>
								<div class="date">29 January 2018 15:24</div>
							</a>
							<a href="" class="notification-list">
								<div class="name">Transactions Report</div>
								<div class="text">This month transaction report has been generated</div>
								<div class="date">29 January 2018 15:24</div>
							</a>
							<a href="" class="notification-list">
								<div class="name">Transactions Report</div>
								<div class="text">This month transaction report has been generated</div>
								<div class="date">29 January 2018 15:24</div>
							</a>
							<a href="" class="notification-list">
								<div class="name">Transactions Report</div>
								<div class="text">This month transaction report has been generated</div>
								<div class="date">29 January 2018 15:24</div>
							</a>
						</div>
					</div>
				</div>
				<div class="notification-box">
					<div class="icon">
						<i class="pe-7s-comment"></i>
					</div>
					<div class="notification-content">
						<div class="header">
							<div class="title">3 Notification</div>
							<div class="action">Notification Settings</div>
						</div>
						<div class="content">
							<a href="" class="notification-list">
								<div class="name">Transactions Report</div>
								<div class="text">This month transaction report has been generated</div>
								<div class="date">29 January 2018 15:24</div>
							</a>
							<a href="" class="notification-list">
								<div class="name">Transactions Report</div>
								<div class="text">This month transaction report has been generated</div>
								<div class="date">29 January 2018 15:24</div>
							</a>
							<a href="" class="notification-list">
								<div class="name">Transactions Report</div>
								<div class="text">This month transaction report has been generated</div>
								<div class="date">29 January 2018 15:24</div>
							</a>
							<a href="" class="notification-list">
								<div class="name">Transactions Report</div>
								<div class="text">This month transaction report has been generated</div>
								<div class="date">29 January 2018 15:24</div>
							</a>
						</div>
					</div>
				</div>
			</div>
			<div class="user-profile">
				<div class="user-image">
					<div class="image">
						<img src="/app/images/profile.jpg">
					</div>
				</div>
				<div class="dropdown">
					<div class="info">
						<div class="user-name">{{ activeUser.name }}</div>
						<div class="user-group">Administrator</div>
					</div>
					<div class="dropdown-list">
						<router-link :to="{ name: 'update-profile' }">Profile</router-link>
						<router-link :to="{ name: 'settings' }">Settings</router-link>
						<router-link :to="{ name: 'change-password' }">Change Password</router-link>
					</div>
					<div class="dropdown-list">
						<a href="javascript:;" @click="logout">Logout</a>
					</div>
				</div>
			</div>
			<div class="profile-nav-mobile">
				<i class="pe-7s-config"></i>
			</div>
		</div>
	</div>
</template>

<script>
    import { mapGetters, mapActions } from 'vuex'

    export default {
    	computed: {
            ...mapGetters({
                activeUser: 'global/activeUser'
            })
        },
        methods: {
        	hideAllNotifications() {
        		$('body').removeClass('mask')
        		$('.quick-link').find('ul').hide()
        		$('.user-profile').find('.dropdown').hide()
        		$('.messages').find('.messages-box').hide()
        		$('.notification').find('.notification-box').find('.notification-content').hide()
        	},
        	initNotification() {
        		var self = this
        		$('.notification').find('.notification-box').each(function() {
        			$(this).on('click', function() {
        				if ($(this).find('.notification-content').is(':visible')) {
        					$('body').removeClass('mask')
        					$(this).find('.notification-content').hide()
        				} else {
        					self.hideAllNotifications()
        					$('body').addClass('mask')
        					$(this).find('.notification-content').show()
        				}
        			})
        		})

        		$('.notification').find('.notification-box').each(function() {
        			$(this).find('.content').slimScroll({
        				color: 'rgb(142, 142, 142)',
        				height: 270
        			})
        		})
        	},
        	initMessages() {
        		var self = this
        		$('.messages').on('click', function() {
        			if ($(this).find('.messages-box').is(':visible')) {
        				$('body').removeClass('mask')
        				$(this).find('.messages-box').hide()
        			} else {
        				self.hideAllNotifications()
        				$('body').addClass('mask')
        				$(this).find('.messages-box').show()
        			}
        		})

        		$('.messages').find('.content').slimScroll({
        			color: 'rgb(142, 142, 142)',
        			height: 250
        		})
        	},
        	initQuickLink() {
        		var self = this
        		$('.quick-link').on('click', function() {
        			if ($(this).find('ul').is(':visible')) {
        				$('body').removeClass('mask')
        				$(this).find('ul').hide()
        			} else {
        				self.hideAllNotifications()
        				$('body').addClass('mask')
        				$(this).find('ul').show()
        			}
        		})
        	},
        	hideAllMenu() {
        		$('body').removeClass('mask')
        		$('.user-profile').hide()
        		$('.side-nav').hide()
        	},
        	initProfileNav() {
        		var self = this
        		$('.user-profile').on('click', function() {
        			if ($(window).width() > 1100) {
        				if ($(this).find('.dropdown').is(':visible')) {
        					$('body').removeClass('mask')
        					$(this).find('.dropdown').hide()
        				} else {
        					self.hideAllNotifications()
        					$('body').addClass('mask')
        					$(this).find('.dropdown').show()
        				}
        			}
        		})
        	},
        	initMobileProfileNav() {
        		var self = this
        		$('.profile-nav-mobile').on('click', function() {
        			if ($('.user-profile').is(':visible')) {
        				$('body').removeClass('mask')
        				$('.user-profile').hide()
        			} else {
        				self.hideAllMenu()
        				$('body').addClass('mask')
        				$('.user-profile').show()
        			}
        		})
        	},
        	initMobileNav() {
        		var self = this
        		$('.side-nav-mobile').on('click', function() {
        			if ($('.side-nav').is(':visible')) {
        				$('body').removeClass('mask')
        				$('.side-nav').hide()
        			} else {
        				self.hideAllMenu()
        				$('body').addClass('mask')
        				$('.side-nav').show()
        			}
        		})
        	},
        	initResponsiveSideNav() {
        		if ($(window).width() <= 1100) {
        			$('.side-nav').find('.side-nav-box').slimScroll({
        				color: 'rgb(142, 142, 142)',
        				height: $(window).height() - 60
        			})
        		}
        	},
            logout() {
            	localStorage.removeItem('user')
            	this.$router.push({
            		name: 'login'
            	})
            }
        },
        mounted() {
        	this.initResponsiveSideNav()
        	this.initMobileNav()
        	this.initProfileNav()
        	this.initMobileProfileNav()
        	this.initQuickLink()
        	this.initMessages()
        	this.initNotification()
        }
    }
</script>